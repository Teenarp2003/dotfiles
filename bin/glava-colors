#!/bin/bash
## Create a variable with the path to the FIFO (First-In-First-Out Queue) we want to use. $XDG_RUNTIME_DIR is a standard location on many Linux distros that is similar to /tmp but only accessible by the current user. It should be a path like /run/user/1000.
fifo="$XDG_RUNTIME_DIR/glava.fifo"
# Get the desired color from the pywal cache. --raw-output just removes the quotes from around the value
foreground="$(jq --raw-output '.colors.color2' "$HOME/.cache/wal/colors.json")"
rm "/$XDG_RUNTIME_DIR/glava.fifo"
echo "$foreground" >> "$fifo"
killall glava
tail -f "$fifo" | /bin/glava --desktop --stdin &
